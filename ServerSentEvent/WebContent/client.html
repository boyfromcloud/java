<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
	</head>
	<body>
		<input type="button" value="获得服务器发送的数据" onclick="push()"/>
		<div id="div1">
			<!--显示推送的消息-->
		</div>
		
		<script>
		
			var div1 = document.getElementById('div1'); 
			//发出请求得到服务器端推送的数据
			function push() {
				
				//连接服务器，发出请求
				var source = new EventSource('SentTimeServlet');
				
				//链接成功的回调函数
				source.onopen = function(e) {
					alert('链接服务器成功');
				}
				//连接失败的回调函数
				source.onerror = function(e) {
					alert('连接服务器失败');
				}
				//消息事件回调,e.data就是响应的消息数据
				source.onmessage = function(e) {
					div1.innerHTML = e.data + '<br>' ;
				}
			}
		</script>
	</body>
</html>
